const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Index-BsPGDdzS.js","assets/vendor-CTLkAQ17.js","assets/vendor-react-router-xEMQRDFj.js","assets/vendor-icons-BvmhBeEN.js","assets/vendor-supabase-query-BZ8e5l_3.js","assets/NotFound-UeG5pYR5.js","assets/Login-0vYdl14U.js","assets/card-Cv3fZd4i.js","assets/input-BjE4wIy-.js","assets/label-DoZpU7nD.js","assets/Dashboard-DuYjXSGQ.js","assets/table-DuTSpFz9.js","assets/Users-CQdwf8NY.js","assets/dialog-CSShFCkQ.js","assets/select-DRKyGRlm.js","assets/toast-BTgtjvQY.js","assets/Settings-jhJP_lB9.js","assets/Reports-Bw-dyD5m.js","assets/calendar-CAMB6cU1.js","assets/Audit-BZCo7SgJ.js","assets/Absences-QXMfKJSA.js","assets/Devices-5A3wwNrb.js","assets/Chat-DKD-NY56.js","assets/scroll-area-2rGlh5Z0.js","assets/Announcements-CF6cRiPS.js"])))=>i.map(i=>d[i]);
import{r as i,w as K,x as Q,m as e,V as L,y as C,z as I,B as D,C as z,T as M,D as V,E as H,G as ee,$ as te,I as k,J as se,N as P,O as $,K as re,L as oe,U as ae,W as m,_ as p,X as ne,Y as ie,Z as u}from"./vendor-CTLkAQ17.js";import{H as de,c as ce}from"./vendor-react-router-xEMQRDFj.js";import{X as B,L as F,C as le,a as ue,B as fe,P as me,S as pe,M as ge,U as xe,b as he,c as ve,d as be,e as ye}from"./vendor-icons-BvmhBeEN.js";import{c as je,Q as _e}from"./vendor-supabase-query-BZ8e5l_3.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}})();const we=1,Ne=1e6;let E=0;function Te(){return E=(E+1)%Number.MAX_SAFE_INTEGER,E.toString()}const O=new Map,R=t=>{if(O.has(t))return;const r=setTimeout(()=>{O.delete(t),j({type:"REMOVE_TOAST",toastId:t})},Ne);O.set(t,r)},Ae=(t,r)=>{switch(r.type){case"ADD_TOAST":return{...t,toasts:[r.toast,...t.toasts].slice(0,we)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===r.toast.id?{...s,...r.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=r;return s?R(s):t.toasts.forEach(o=>{R(o.id)}),{...t,toasts:t.toasts.map(o=>o.id===s||s===void 0?{...o,open:!1}:o)}}case"REMOVE_TOAST":return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==r.toastId)}}},N=[];let T={toasts:[]};function j(t){T=Ae(T,t),N.forEach(r=>{r(T)})}function Ee({...t}){const r=Te(),s=a=>j({type:"UPDATE_TOAST",toast:{...a,id:r}}),o=()=>j({type:"DISMISS_TOAST",toastId:r});return j({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:a=>{a||o()}}}),{id:r,dismiss:o,update:s}}function U(){const[t,r]=i.useState(T);return i.useEffect(()=>(N.push(r),()=>{const s=N.indexOf(r);s>-1&&N.splice(s,1)}),[t]),{...t,toast:Ee,dismiss:s=>j({type:"DISMISS_TOAST",toastId:s})}}function v(...t){return K(Q(t))}const Oe=H,W=i.forwardRef(({className:t,...r},s)=>e.jsx(L,{ref:s,className:v("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...r}));W.displayName=L.displayName;const Se=I("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),J=i.forwardRef(({className:t,variant:r,...s},o)=>e.jsx(C,{ref:o,className:v(Se({variant:r}),t),...s}));J.displayName=C.displayName;const Ie=i.forwardRef(({className:t,...r},s)=>e.jsx(D,{ref:s,className:v("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...r}));Ie.displayName=D.displayName;const q=i.forwardRef(({className:t,...r},s)=>e.jsx(z,{ref:s,className:v("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...r,children:e.jsx(B,{className:"h-4 w-4"})}));q.displayName=z.displayName;const G=i.forwardRef(({className:t,...r},s)=>e.jsx(M,{ref:s,className:v("text-sm font-semibold",t),...r}));G.displayName=M.displayName;const Y=i.forwardRef(({className:t,...r},s)=>e.jsx(V,{ref:s,className:v("text-sm opacity-90",t),...r}));Y.displayName=V.displayName;function Pe(){const{toasts:t}=U();return e.jsxs(Oe,{children:[t.map(function({id:r,title:s,description:o,action:a,...n}){return e.jsxs(J,{...n,children:[e.jsxs("div",{className:"grid gap-1",children:[s&&e.jsx(G,{children:s}),o&&e.jsx(Y,{children:o})]}),a,e.jsx(q,{})]},r)}),e.jsx(W,{})]})}const Re=({...t})=>{const{theme:r="system"}=ee();return e.jsx(te,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},Le=se,Ce=i.forwardRef(({className:t,sideOffset:r=4,...s},o)=>e.jsx(k,{ref:o,sideOffset:r,className:v("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));Ce.displayName=k.displayName;const De="https://gfoogchxvxjfqwulgrbb.supabase.co",ze="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdmb29nY2h4dnhqZnF3dWxncmJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE2NTg3ODIsImV4cCI6MjA3NzIzNDc4Mn0.ZERsAMY-0EZ2jWg3j2gnhM6-sYIgEouWRYkKSW9LT8M",y=je(De,ze),Z=i.createContext(void 0),Me=({children:t})=>{const[r,s]=i.useState(null),[o,a]=i.useState(null),[n,d]=i.useState(!0),[x,h]=i.useState(!1),_=async g=>{h(!0);try{const{data:c,error:l}=await y.from("profiles").select("*").eq("id",g).single();if(l){l.code==="PGRST116"?(console.warn(`[Auth] Profile not found for user ${g}. This might be a race condition after signup.`),a(null)):(console.error(`[Auth] Critical error fetching profile for user ${g}:`,l),a(null)),h(!1);return}const b=c?{...c,role:(c.role||"colaborador").trim().toLowerCase()}:null;console.log(`[Auth] Profile loaded for ${g}. Role: ${b==null?void 0:b.role}`),a(b)}catch(c){console.error("[Auth] General error during profile fetch:",c),a(null)}finally{h(!1)}};i.useEffect(()=>{y.auth.getSession().then(({data:{session:c}})=>{var l;s(c),(l=c==null?void 0:c.user)!=null&&l.id&&_(c.user.id)}).catch(c=>{console.error("[Auth] Failed to get initial session:",c)}).finally(()=>{d(!1)});const{data:{subscription:g}}=y.auth.onAuthStateChange(async(c,l)=>{var b;s(l),d(!1),(b=l==null?void 0:l.user)!=null&&b.id?await _(l.user.id):c==="SIGNED_OUT"&&(a(null),h(!1))});return()=>g.unsubscribe()},[]);const w=async(g,c)=>{const{error:l}=await y.auth.signInWithPassword({email:g,password:c});if(l)throw l},f=async()=>{const{error:g}=await y.auth.signOut();if(g)throw g;a(null)};return e.jsx(Z.Provider,{value:{isAuthenticated:!!r,user:o,session:r,loading:n,profileLoading:x,signIn:w,signOut:f},children:t})},X=()=>{const t=i.useContext(Z);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Ve=({children:t})=>{const{isAuthenticated:r,loading:s,user:o,profileLoading:a,signOut:n}=X(),{toast:d}=U();if(s||a)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx(F,{className:"h-8 w-8 animate-spin text-blue-600"})});if(!r)return e.jsx(P,{to:"/login",replace:!0});const x=(o==null?void 0:o.role)==="gestor"||(o==null?void 0:o.role)==="admin";return!o||!x?(o&&!x?(console.log(`[ProtectedRoute] User Role: ${o.role}. Access denied. Forcing sign out.`),n().then(()=>{d({variant:"destructive",title:"Acesso Negado",description:"Apenas gestores e administradores podem acessar o Painel Web."})}).catch(h=>console.error("Sign out failed:",h))):o||(console.error("[ProtectedRoute] User is authenticated but profile is missing. Forcing sign out."),n().then(()=>{d({variant:"destructive",title:"Erro de Perfil",description:"Não foi possível carregar seu perfil. Por favor, faça login novamente."})}).catch(h=>console.error("Sign out failed:",h))),e.jsx(P,{to:"/login",replace:!0})):t?e.jsx(e.Fragment,{children:t}):e.jsx($,{})},ke=I("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),A=i.forwardRef(({className:t,variant:r,size:s,asChild:o=!1,...a},n)=>{const d=o?re:"button";return e.jsx(d,{className:v(ke({variant:r,size:s,className:t})),ref:n,...a})});A.displayName="Button";const $e=I("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Be({className:t,variant:r,...s}){return e.jsx("div",{className:v($e({variant:r}),t),...s})}const S=768;function Fe(){const[t,r]=i.useState(void 0);return i.useEffect(()=>{const s=window.matchMedia(`(max-width: ${S-1}px)`),o=()=>{r(window.innerWidth<S)};return s.addEventListener("change",o),r(window.innerWidth<S),()=>s.removeEventListener("change",o)},[]),!!t}const Ue=()=>{const t=oe(),r=ae(),{user:s,signOut:o,profileLoading:a}=X(),n=Fe(),[d,x]=i.useState(!1);i.useEffect(()=>{x(!n)},[n]);const h=[{path:"/dashboard",icon:le,label:"Dashboard"},{path:"/reports",icon:ue,label:"Relatórios/BI"},{path:"/announcements",icon:fe,label:"Avisos"},{path:"/absences",icon:me,label:"Férias/Afast."},{path:"/devices",icon:pe,label:"Dispositivos"},{path:"/chat",icon:ge,label:"Chat Interno"},{path:"/users",icon:xe,label:"Gestão de Usuários"},{path:"/audit",icon:he,label:"Auditoria"},{path:"/settings",icon:ve,label:"Configurações"}],_=f=>{t(f),n&&x(!1)},w=f=>r.pathname===f;return a?e.jsx("div",{className:`
        bg-sidebar shadow-md transition-all duration-300 
        ${n?"fixed top-0 left-0 h-full z-40 w-64 p-4":"sticky top-0 h-screen w-64 p-4"}
        hidden md:flex flex-col
      `,children:e.jsx("div",{className:"text-sm text-sidebar-foreground",children:"Carregando menu..."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`
        bg-sidebar shadow-xl transition-transform duration-300 ease-in-out
        fixed top-0 left-0 h-full z-40 flex-shrink-0
        md:sticky md:translate-x-0 md:w-64 md:p-4 md:border-r md:border-sidebar-border
        ${n?d?"w-64 translate-x-0 p-4":"w-0 -translate-x-full p-0":"w-64 p-4"}
      `,children:e.jsxs("div",{className:`flex flex-col h-full ${n&&!d?"hidden":"block"}`,children:[e.jsxs("div",{className:"mb-6 flex items-center space-x-2",children:[e.jsx("img",{src:"logo.png",alt:"Logo da Empresa",className:"h-10 w-auto object-contain"}),e.jsx("h2",{className:"text-xl font-bold text-sidebar-foreground",children:"Painel de Ponto"})]}),e.jsx("ul",{className:"space-y-2 flex-grow",children:h.map(f=>e.jsx("li",{children:e.jsxs(A,{variant:w(f.path)?"default":"ghost",onClick:()=>_(f.path),className:`w-full justify-start 
                    ${w(f.path)?"bg-sidebar-primary text-sidebar-primary-foreground hover:bg-sidebar-primary/90":"text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"}
                  `,children:[e.jsx(f.icon,{className:"mr-2 h-4 w-4"}),f.label]})},f.path))}),e.jsxs("div",{className:"mt-auto pt-4 border-t border-sidebar-border",children:[e.jsxs("div",{className:"text-sm text-sidebar-foreground mb-2 truncate flex items-center",children:[(s==null?void 0:s.first_name)||(s==null?void 0:s.email),e.jsx(Be,{className:"ml-2 text-xs bg-secondary text-secondary-foreground hover:bg-secondary/80",children:s==null?void 0:s.role})]}),e.jsxs(A,{variant:"secondary",onClick:o,className:"w-full",children:[e.jsx(be,{className:"mr-2 h-4 w-4"}),"Sair"]})]})]})}),n&&e.jsx(A,{variant:"default",size:"icon",className:"fixed top-4 left-4 z-50 bg-primary text-primary-foreground shadow-lg hover:bg-primary/90",onClick:()=>x(!d),children:d?e.jsx(B,{className:"h-4 w-4"}):e.jsx(ye,{className:"h-4 w-4"})}),n&&d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-30",onClick:()=>x(!1)})]})},We=()=>e.jsxs("div",{className:"flex min-h-screen bg-background",children:[e.jsx(Ue,{}),e.jsx("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-8 md:ml-64 md:p-8 bg-background",children:e.jsx("div",{className:"pt-12 md:pt-0",children:e.jsx($,{})})})]}),Je=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx(F,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando conteúdo..."})]})}),qe=m.lazy(()=>p(()=>import("./Index-BsPGDdzS.js"),__vite__mapDeps([0,1,2,3,4]))),Ge=m.lazy(()=>p(()=>import("./NotFound-UeG5pYR5.js"),__vite__mapDeps([5,1,2]))),Ye=m.lazy(()=>p(()=>import("./Login-0vYdl14U.js"),__vite__mapDeps([6,1,2,7,8,9,3,4]))),Ze=m.lazy(()=>p(()=>import("./Dashboard-DuYjXSGQ.js"),__vite__mapDeps([10,1,2,4,7,11,3]))),Xe=m.lazy(()=>p(()=>import("./Users-CQdwf8NY.js"),__vite__mapDeps([12,1,2,4,8,9,7,11,13,3,14,15]))),Ke=m.lazy(()=>p(()=>import("./Settings-jhJP_lB9.js"),__vite__mapDeps([16,1,2,7,8,9,3,4]))),Qe=m.lazy(()=>p(()=>import("./Reports-Bw-dyD5m.js"),__vite__mapDeps([17,1,2,7,18,3,4,15]))),He=m.lazy(()=>p(()=>import("./Audit-BZCo7SgJ.js"),__vite__mapDeps([19,1,2,4,7,11,3]))),et=m.lazy(()=>p(()=>import("./Absences-QXMfKJSA.js"),__vite__mapDeps([20,1,2,4,7,11,13,3,14,8,9,18,15]))),tt=m.lazy(()=>p(()=>import("./Devices-5A3wwNrb.js"),__vite__mapDeps([21,1,2,4,7,11,15,3]))),st=m.lazy(()=>p(()=>import("./Chat-DKD-NY56.js"),__vite__mapDeps([22,1,2,4,7,8,23,15,3]))),rt=m.lazy(()=>p(()=>import("./Announcements-CF6cRiPS.js"),__vite__mapDeps([24,1,2,4,7,8,9,13,3,23,15]))),ot=new ne({defaultOptions:{queries:{staleTime:1e3*60*5,refetchOnWindowFocus:!1}}}),at=()=>e.jsx(_e,{client:ot,children:e.jsxs(Le,{children:[e.jsx(Pe,{}),e.jsx(Re,{}),e.jsx(de,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(Me,{children:e.jsx(i.Suspense,{fallback:e.jsx(Je,{}),children:e.jsxs(ie,{children:[e.jsx(u,{path:"/",element:e.jsx(qe,{})}),e.jsx(u,{path:"/login",element:e.jsx(Ye,{})}),e.jsx(u,{element:e.jsx(Ve,{}),children:e.jsxs(u,{element:e.jsx(We,{}),children:[e.jsx(u,{path:"/dashboard",element:e.jsx(Ze,{})}),e.jsx(u,{path:"/users",element:e.jsx(Xe,{})}),e.jsx(u,{path:"/settings",element:e.jsx(Ke,{})}),e.jsx(u,{path:"/reports",element:e.jsx(Qe,{})}),e.jsx(u,{path:"/audit",element:e.jsx(He,{})}),e.jsx(u,{path:"/absences",element:e.jsx(et,{})}),e.jsx(u,{path:"/devices",element:e.jsx(tt,{})}),e.jsx(u,{path:"/chat",element:e.jsx(st,{})}),e.jsx(u,{path:"/announcements",element:e.jsx(rt,{})})]})}),e.jsx(u,{path:"*",element:e.jsx(Ge,{})})]})})})})]})});ce.createRoot(document.getElementById("root")).render(e.jsx(at,{}));export{A as B,U as a,Be as b,v as c,ke as d,y as s,X as u};
